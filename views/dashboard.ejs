<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Bootstrap Styling -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <!-- Main CSS -->
  <link rel="stylesheet" href="/css/styles.css">
  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Alata&family=Montserrat&display=swap" rel="stylesheet">
  <!-- Materialize Icons -->
  <link rel="stylesheet" href="//cdn.materialdesignicons.com/5.4.55/css/materialdesignicons.min.css">
  <!-- Bootstrap -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <!-- Main JS -->
  <script src="/js/app.js" defer></script>
  
  <title>FLIXR</title>
</head>
<body>
    <nav class="navbar navbar-dark bg-black navbar-expand fixed-top">
        <a class="navbar-brand text-light" href="/dashboard">FLIXR</a>
        <ul class="navbar-nav ml-auto"></ul>
    </nav>
<div class="container-fluid px-0 flex-grow-1">
    <div class="row no-gutters flex-nowrap navbar-expand-lg">
        <div class="col-xl-1 col-auto text-white sidebar bg-black min-vh-100">
            <div class="row no-gutters flex-nowrap sticky-top sticky-top-side">
                <div class="col-sm-12 text-center">
                    <div class="sidenav">
                        <a class="nav-link py-2" href="#navTop"><i class="ml-auto mdi mdi-home-outline icon-white"></i></a>
                        <a class="nav-link py-2" href="/dashboard#sectionMyPlaylists"><i class="ml-auto mdi mdi-youtube-subscription icon-white"></i></a>
                        <a class="nav-link py-2" href="/playlists/new"><i class="ml-auto mdi mdi-plus-circle icon-white"></i></a>
                        <a class="nav-link py-2" href="#sectionSettings"><i class="ml-auto mdi mdi-cog-outline icon-white"></i></a>
                        <a class="nav-link py-2" href="./users/logout"><i class="ml-auto mdi mdi-logout-variant icon-white"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <main class="col px-4 px-lg-5">
            <div class="row">
                <div class="col-xl-12 order-xl-0 order-md-1 pt-3 pb-4">
                    <div class="card text-light shadow-sm h-100">
                        <div class="card-header bg-transparent">
                            <div class="row align-items-center flex-nowrap">
                                <div class="col">
                                    <h4 class="font-weight-light mb-0">Recent Activity</h4>
                                </div>
                                <div class="col-auto ml-auto px-2">
                                    <button data-target="#contentSlider3" data-slide="prev" data-interval="false" class="btn btn-outline-secondary waves-effect rounded-pill btn-sm py-0"><span aria-hidden="true" class="mdi mdi-24px mdi-chevron-left align-middle"></span><span class="sr-only">Previous</span></button>
                                    <button data-target="#contentSlider3" data-slide="next" data-interval="false" class="btn btn-outline-secondary waves-effect rounded-pill btn-sm py-0 ml-2"><span aria-hidden="true" class="mdi mdi-24px mdi-chevron-right align-middle"></span><span class="sr-only">Next</span></button>
                                </div>
                            </div>
                        </div>
                        <div id="contentSlider3" data-ride="carousel" data-interval="false" class="carousel slide my-auto pointer-event">
                            <div class="carousel-inner rounded-lg">

                                    <% recentPlaylists.forEach((playlist, i) => { %>
                                        <% if (i === 0) { %>
                                <div class="carousel-item active">
                                <% } else { %>
                                    <div class="carousel-item">
                                    <% } %>
                                    <div class="card bg-transparent border-0">
                                        <div class="d-flex align-items-center">
                                            <div class="flex-grow-1">
                                                <div class="card-body text-left">
                                                    <h4 class="mb-0 font-weight-light"><%= playlist.title %></h4>
                                                    <span class="text-muted font-weight-normal"><%= playlist.user.name %></span>
                                                    <p class="mt-1 text-truncate"><%= playlist.description %></p>
                                                    <a href="/playlists/<%= playlist._id %>" class="btn btn-sm btn-outline-secondary align-bottom ml-3">View Playlist</a></p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <% }) %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- My Playlist Section-->
            <section class="row min-vh-100 pt-5" id="sectionMyPlaylists">
                <div class="col pt-4 d-flex flex-column">
                    <div class="rounded flex-fill p-4">
                        <div class="card text-light shadow-sm h-100">
                            <div class="card-body">
                                <!-- tabs -->
                                <ul class="nav nav-tabs" role="tablist">
                                    <li class="nav-item"><a href="#tab1" class="nav-link bg-transparent text-white text-uppercase active" data-toggle="tab" data-target="#tab1" role="tab">My Watchlist</a></li>
                                </ul>
                                <div class="tab-content py-4">
                                    <div class="tab-pane active" id="tab1" role="tabpanel">

<% userPlaylists.forEach(playlist => { %>
    <div class="card bg-transparent shadow-sm mb-3">
        <div class="card-body">
            <span class="float-right text-light small"><%= moment(playlist.createdAt).format("dddd, MMM Do, YYYY") %></span>
            <h5 class="card-title"><%= playlist.title %></h5>
            <% if (playlist.description) { %> 
                <p class="card-text"><%= playlist.description %>
                <% } else { %> 
                <p class="card-text">
            <% } %> 
            <a href="/playlists/<%= playlist._id %>" class="btn btn-sm btn-outline-secondary align-bottom ml-3">View Playlist</a></p>
        </div>
    </div>
<% }) %>

                                    </div>
                                </div>
                                <!-- /tab-content -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!--Section ends for my playlists-->
            <!--Footer can go here -->
        </main>
    </div>
</div>

<%- include('./partials/footer.ejs') %>